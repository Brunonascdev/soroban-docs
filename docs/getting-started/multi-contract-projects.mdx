---
sidebar_position: 30
title: 3. Multi-Contract Projects
description: Expand a Soroban project from developing one contract, to developing two contracts.
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

Many Soroban projects need more than one contract. Cargo makes this easy with workspaces, though it doesn't yet give a way to initialize a new project as a workspace (see [#8365](https://github.com/rust-lang/cargo/issues/8365)). Let's set it up manually.

This tutorial assumes that you've already completed the previous steps in Getting Started: [Setup](setup.mdx), [Hello World](hello-world.mdx), and [Deploy to Testnet](deploy-to-testnet.mdx).

## Filesystem Changes

Rather than just a `hello-soroban` folder, we want a new `soroban-tutorial` folder with a `contracts` folder inside, into which we'll move the existing `hello-soroban` project. As a diff, we want this:

```diff
-hello-soroban
+soroban-tutorial/contracts/hello-soroban
```

So change into the parent directory of `hello-soroban` and:

```bash
mkdir -p soroban-tutorial/contracts
mv hello-soroban soroban-tutorial/contracts
cd soroban-tutorial
```

You're going to want some Rust and Cargo stuff in different spots. From the new project root, run:

```bash
rm contracts/hello-soroban/Cargo.lock
mv contracts/hello-soroban/target .
mv contracts/hello-soroban/.soroban .
cp contracts/hello-soroban/Cargo.toml .
```

Note that we copied the Cargo.toml file. That's because we're going to need some of it in the root and some of it in the subdirectory.

## `Cargo.toml` Changes

In the root `Cargo.toml`:

- remove the `[package]`, `[lib]`, `[features]`, and `[dev_dependencies]` sections
- keep the `[profile.release*]` stuff
- replace the line `[dependencies]` with `[workspace.dependencies]`
- add a `[workspace]` section (see below for specific values)

In the contract-specific `Cargo.toml`:

- remove the `[profile.release*]` stuff
- set the dependency versions to use the workspace versions (see example below)

It all ends up looking like this:

<Tabs>
<TabItem value="soroban-tutorial/Cargo.toml" label="Cargo.toml">

```toml
[workspace]
resolver = "2"
members = [
  "contracts/*",
]

[workspace.dependencies]
soroban-sdk = "20.0.0-rc2"

[profile.release]
opt-level = "z"
overflow-checks = true
debug = 0
strip = "symbols"
debug-assertions = false
panic = "abort"
codegen-units = 1
lto = true

[profile.release-with-logs]
inherits = "release"
debug-assertions = true
```

</TabItem>
<TabItem value="soroban-tutorial/contracts/hello-soroban/Cargo.toml" label="contracts/hello-soroban/Cargo.toml">

```toml
[package]
name = "hello-soroban"
version = "0.1.0"
edition = "2021"

[lib]
crate-type = ["cdylib"]

[dependencies]
soroban-sdk = { workspace = true }

[dev_dependencies]
soroban-sdk = { workspace = true, features = ["testutils"] }

[features]
testutils = ["soroban-sdk/testutils"]
```

</TabItem>
</Tabs>

Now make sure everything works:

```bash
soroban contract build
```

Everything should build.

```bash
cargo test
```

All tests should pass.
